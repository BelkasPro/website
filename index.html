<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="img/icon" href="/img/icon.png">
    <title>BelkaPRO - Web</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="window" id="window" >
        <div class="title-bar" id="title-bar">
            <div class="buttons">
                <div class="btn red"></div>
                <div class="btn yellow"></div>
                <div class="btn green"></div>
            </div>
            <span style="color :white; margin-left: auto; margin-right: 10px;">ReadME.txt</span>
        </div>
        <div class="content" id="content">
            Hello user, I see that you have visited my site. It is empty for now, but I will update it in the future. Good luck.
        </div>
    </div>
    <div class="desktop">
        <div class="file" id="recycle-bin">
            <img src="img/rb.png" alt="Recycle Bin" class="file-icon">
            <p class="file-name">Recycle Bin</p>
        </div>
        <div class="file" id="file-icon">
            <img src="img/tf.png" alt="File" class="file-icon">
            <p class="file-name">ReadME.txt</p>
        </div>
    </div>
    <div class="overlay" id="overlay">
        <img src="img/lockscreen.png" alt="Background" class="background">
        <div class="user">
            <div class="user-avatar"></div>
            <div class="user-name">User</div>
        </div>
        <div class="welcome">Welcome User!</div>
        <div class="loading">Loading...</div>
        <audio id="logonSound" src="aud/Logon.mp3"></audio>
        <script src="script.js"></script>
    </div>
    <div id="explorerWindow" class="explorerw">
        <div class="title-bar">
            <div class="buttons">
                <div class="btn red" id="closeButton"></div>
                <div class="btn yellow"></div>
                <div class="btn green"></div>
            </div>
            <span style="color: white; margin-left: auto; margin-right: 10px;">Explorer - [IN DEVELOPMENT!]</span>
        </div>
        <div class="content">
            <ul>
                <li>Documents</li>
                <li>Images</li>
                <li>Music</li>
                <li>Video</li>
            </ul>
        </div>
    </div>
    <div id="settingWindow" class="settingw">
        <div class="title-bar">
            <div class="buttons">
                <div class="btn red" id="clsBtn"></div>
                <div class="btn yellow"></div>
                <div class="btn green"></div>
            </div>
            <span style="color: white; margin-left: auto; margin-right: 10px;">Settings</span>
        </div>
        <div class="userpng">
            <div class="png-avatar"></div>
        </div>
        <div class="content">
            Well, there's no settings page, but you can see konata izumi :3
        </div>
    </div>
    <div class="taskbar">
        <div class="start-button" id="start-button"></div>
        <div class="app-icon" id="exp-lorer">üìÅ</div>
        <div class="app-icon" id="settwing">‚öôÔ∏è</div>
        <div class="app-icon" id="browser">üåê</div>
        <div class="language-label">ENG</div>
    </div>
    <div class="start-menu" id="start-menu">
        <div class="user-info">
            <div class="user-avatar"></div>
            <div class="user-name">User</div>
        </div>
        <div class="divider"></div>
        <div class="menu-item" id="programs">Programs</div>
        <div class="menu-item" id="settings">Settings</div>
        <div class="menu-item" id="logout">Log Out</div>
    </div>
    <div class="footer" id="footer">my time (UTC+3)</div>
    <script>
        const windowElement = document.getElementById("window");
        const titleBar = document.getElementById("title-bar");
        const footer = document.getElementById("footer");
        const startButton = document.getElementById("start-button");
        const startMenu = document.getElementById("start-menu");
        const contentElement = document.getElementById('content');
        const screenLock = document.getElementById("screen-lock");
        const fileIcon = document.getElementById('file-icon');
        const btnRed = document.querySelector('.btn.red');
        const blackScreen = document.createElement('div');
        const overlay = document.getElementById('overlay');
        const logoffSound = new Audio('aud/c.mp3');
        const exp = document.getElementById('exp-lorer');
        const ste = document.getElementById('settwing');
        let isDragging = false;
        let offsetX, offsetY;
        let lastKeyPressTime = 0;
        const keyPressDelay = 500;
        const messages = [
        "You pressed F! Every time text be changed.",
        "Welcome to my site! Stay tuned for updates.",
        "Thank you for visiting! Have a great day!",
        "meowwwwwww mEoww",
        "This site have some secrets!",
        "Press 'logout' button in start menu for changing wallpaper!",
        "I like github!"
        ];
        let currentMessageIndex = 0;
        const startX = window.innerWidth / 2 - 200;
        const startY = window.innerHeight / 2 - 100;
        windowElement.style.left = `${startX}px`;
        windowElement.style.top = `${startY}px`;
        explorerWindow.style.left = `${startX}px`;
        explorerWindow.style.top = `${startY}px`;
        settingWindow.style.left = `${startX}px`;
        settingWindow.style.top = `${startY}px`;

        titleBar.addEventListener("mousedown", (e) => {
            isDragging = true;
            offsetX = e.clientX - windowElement.offsetLeft;
            offsetY = e.clientY - windowElement.offsetTop;
            offsetX = e.clientX - explorerWindow.offsetLeft;
            offsetY = e.clientY - explorerWindow.offsetTop;
            offsetX = e.clientX - settingWindow.offsetLeft;
            offsetY = e.clientY - settingWindow.offsetTop;
            document.addEventListener("mousemove", onMouseMove);
        });

        document.addEventListener("mouseup", () => {
            isDragging = false;
            document.removeEventListener("mousemove", onMouseMove);
        });

        function onMouseMove(e) {
            if (isDragging) {
                const newX = e.clientX - offsetX;
                const newY = e.clientY - offsetY;

                windowElement.style.left = `${newX}px`;
                windowElement.style.top = `${newY}px`;
                explorerWindow.style.left = `${newX}px`;
                explorerWindow.style.top = `${newY}px`;
                settingWindow.style.left = `${newX}px`;
                settingWindow.style.top = `${newY}px`;
            }
        }

        document.addEventListener("keydown", (e) => {
    const currentTime = Date.now();

    if (currentTime - lastKeyPressTime < keyPressDelay) {
        return;
    }

    lastKeyPressTime = currentTime;

    if (e.key.toLowerCase() === "f" || e.key.toLowerCase() === "–∞") {
        windowElement.style.transform = "scale(1.2)";
        setTimeout(() => {
            windowElement.style.left = `${startX}px`;
            windowElement.style.top = `${startY}px`;
            windowElement.style.transform = "scale(1)";
            currentMessageIndex = (currentMessageIndex + 1) % messages.length;
            contentElement.textContent = messages[currentMessageIndex];
        }, 100);
    }

    if (e.key === "—á" || e.key.toLowerCase() === "x") {
        toggleStartMenu();
    }
    });

        const backgrounds = ["img/1.png", "img/2.png", "img/3.png", "img/4.png", "img/5.png", "img/6.png", "img/7.png"];
        function changeWallpaper() {
            const randomBg = backgrounds[Math.floor(Math.random() * backgrounds.length)];
            document.body.style.background = `url('${randomBg}') no-repeat center center/cover`;
        }
        changeWallpaper();

        function updateTime() {
            const now = new Date();
            const options = { timeZone: 'Europe/Moscow', hour: '2-digit', minute: '2-digit' };
            const timeString = new Intl.DateTimeFormat('ru-RU', options).format(now);
            footer.textContent = `${timeString}`;
        }

        setInterval(updateTime, 1000);
        updateTime();

        startButton.addEventListener("click", () => {
            toggleStartMenu();
        });

        function toggleStartMenu() {
            if (startMenu.style.display === "none" || startMenu.style.display === "") {
                startMenu.style.display = "block";
                startButton.classList.add("bounce");
            } else {
                startButton.classList.remove("bounce");
                setTimeout(() => {
                    startMenu.style.display = "none";
                }, 300);
            }
        }
        fileIcon.addEventListener('dblclick', () => {
            windowElement.style.display = 'block';
            windowElement.style.opacity = '0';
            windowElement.style.transform = "scale(1.2)";
            setTimeout(() => {
                windowElement.style.transition = 'opacity 0.5s, transform 0.5s';
                windowElement.style.opacity = '1';
                windowElement.style.transform = "scale(1)";
            }, 10);
        });
        btnRed.addEventListener("click", () => {
            windowElement.style.transition = 'opacity 0.5s, transform 0.5s';
            windowElement.style.transform = "scale(1.2)";
            windowElement.style.opacity = '0';
            setTimeout(() => {
                windowElement.style.display = 'none';
                windowElement.style.transform = "scale(1)";
            }, 500);
        });
        document.getElementById('settings').addEventListener('click', () => {
            logoffSound.play();
        });
        document.getElementById('programs').addEventListener('click', () => {
            logoffSound.play();
        });
        document.getElementById('logout').addEventListener('click', () => {
            blackScreen.style.position = 'fixed';
            blackScreen.style.top = '0';
            blackScreen.style.left = '0';
            blackScreen.style.width = '100%';
            blackScreen.style.height = '100%';
            blackScreen.style.backgroundColor = 'black';
            blackScreen.style.opacity = '0';
            blackScreen.style.transition = 'opacity 0.1s';
            document.body.appendChild(blackScreen);
            setTimeout(() => {
                blackScreen.style.opacity = '1';
                logoffSound.play();
                changeWallpaper();
                setTimeout(() => {
                    blackScreen.style.opacity = '0';
                }, 200);
            }, 100);
            blackScreen.style.transition = 'opacity 0.2s';
            blackScreen.style.opacity = 0;
            setTimeout(() => {
            document.body.removeChild(blackScreen);
                setTimeout(() => {
                    document.body.removeChild(blackScreen);
                    windowElement.classList.add('show');
                }, 100);
            }, 600);
        });

        document.getElementById('closeButton').addEventListener('click', () => {
            explorerWindow.style.transition = 'opacity 0.5s, transform 0.5s';
            explorerWindow.style.transform = "scale(1.2)";
            explorerWindow.style.opacity = '0';
            setTimeout(() => {
                explorerWindow.style.display = 'none';
                explorerWindow.style.transform = "scale(1)";
            }, 500);
        });
        exp.addEventListener('click', () => {
            explorerWindow.style.display = 'block';
            explorerWindow.style.opacity = '0';
            explorerWindow.style.transform = "scale(1.2)";
            setTimeout(() => {
                explorerWindow.style.transition = 'opacity 0.5s, transform 0.5s';
                explorerWindow.style.opacity = '1';
                explorerWindow.style.transform = "scale(1)";
            }, 10);
        });
        document.getElementById('clsBtn').addEventListener('click', () => {
            settingWindow.style.transition = 'opacity 0.5s, transform 0.5s';
            settingWindow.style.transform = "scale(1.2)";
            settingWindow.style.opacity = '0';
            setTimeout(() => {
                settingWindow.style.display = 'none';
                settingWindow.style.transform = "scale(1)";
            }, 500);
        });
        ste.addEventListener('click', () => {
            settingWindow.style.display = 'block';
            settingWindow.style.opacity = '0';
            settingWindow.style.transform = "scale(1.2)";
            setTimeout(() => {
                settingWindow.style.transition = 'opacity 0.5s, transform 0.5s';
                settingWindow.style.opacity = '1';
                settingWindow.style.transform = "scale(1)";
            }, 10);
        });
    </script>
</body>
</html>
